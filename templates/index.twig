{% extends '_layouts/cp' %}
{% includeCssResource "/auditr/css/style.css" %}
{% includeJsResource "/auditr/js/index.js" %}

{% set title = "Auditr" %}

{% set tabs = {
    info: { label: 'Info'|t, url: url('auditr') },
    content: { label: 'Content'|t, url: url('auditr/content') },
    plugins: { label: 'Plugins'|t, url: url('auditr/plugins') },
    users: { label: 'Users'|t, url: url('auditr/users') },
    updates: { label: 'Updates'|t, url: url('auditr/updates') },
    pageSpeed: { label: 'Page Speed'|t, url: url('auditr/pageSpeed') }
} %}

{% set selectedTab = 'info' %}

{% set content %}

<a href="{{ url('auditr/convert') }}">Export PDF</a>

{% from _self import pl %}

<div class="Section">
  <h3 class="Section__header">Basic Info</h3>
  <ul class="Section__list">
    {% set info = craft.auditr.getInfo() %}
    <li class="Section__list-item">{{ info.siteName }}</li>
    <li class="Section__list-item">{{ info.siteUrl }}</li>
  </ul>
</div>

<div class="Section">
<h3 class="Section__header">Server</h3>
  <ul class="Section__list">
    {% set serverInfo = craft.auditr.getServerInfo() %}
    <li class="Section__list-item">Software: {{ serverInfo.software }}</li>
    <li class="Section__list-item">Operating System: {{ serverInfo.os }}</li>
    <li class="Section__list-item">PHP Version: {{ serverInfo.phpVersion }}</li>
    <li class="Section__list-item">Document Root: {{ serverInfo.documentRoot }}</li>
    <li class="Section__list-item">Craft Version: {{ serverInfo.craftVersion }}</li>
  </ul>
</div>

<div class="Section">
  <h3 class="Section__header">.htaccess</h3>
  <a data-toggle>Show / Hide</a>
  <pre class="Section__mono">{{ craft.auditr.getHtaccess() }}</pre>
</div>

<div class="Section">
  <h3 class="Section__header">Globals</h3>
  {% set globalSets = craft.auditr.getGlobals() %}
  <ul class="Section__list">
    {% for set, fields in globalSets %}
      <li class="Section__list-item">{{ set }}</li>
      <ul class="Section__list Section__list--sub">
        {% for field in fields %}
          <li class="Section__list-item">{{ field.name }}</li>
        {% endfor %}
      </ul>
    {% endfor %}
  </ul>
</div>

{% endset %}
