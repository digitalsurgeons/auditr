{% extends '_layouts/cp' %}
{% includeCssResource "/auditr/css/style.css" %}
{% includeJsResource "/auditr/js/index.js" %}

{% set title = "Auditr" %}

{% set tabs = {
    info: { label: 'Info'|t, url: url('auditr') },
    content: { label: 'Content'|t, url: url('auditr/content') },
    plugins: { label: 'Plugins'|t, url: url('auditr/plugins') },
    users: { label: 'Users'|t, url: url('auditr/users') },
    updates: { label: 'Updates'|t, url: url('auditr/updates') },
    pageSpeed: { label: 'Page Speed'|t, url: url('auditr/pageSpeed') }
} %}

{% set selectedTab = 'users' %}

{% set content %}

<div class="Section">
  <h3 class="Section__header">Users</h3>
  <ul class="Section__list">
    {% set userGroups = craft.auditr.getUsers() %}
    {% for groupName, users in userGroups %}
    <li class="Section__list-item Section__list-item--holder">
      <h4 class="Section__subheader">{{ groupName }}</h4>
      <dl class="Section__list Section__list--defs">
        {% for user in users %}
          <dt class="Section__list-title {{ cycle(['Section__list-title--gray', ''], loop.index0) }}">
            {% if user.firstName and user.lastName %}{{ user.firstName }} {{ user.lastName }}{% endif %}
          </dt>
          <dd class="Section__list-item {{ cycle(['Section__list-item--gray', ''], loop.index0) }}">
            {{ user.username }}
          </dd>
        {% else %}
          No data
        {% endfor %}
      </dl>
    </li>
    {% endfor %}
  </ul>
</div>

{% endset %}
